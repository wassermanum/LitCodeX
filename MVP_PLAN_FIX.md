# План доработок MVP (UI + каталог литературы)

> План предназначен для агента Codex. Выполняем фазы последовательно, минимально необходимыми изменениями, без оверинжиниринга.

## 0) Цель
Добавить каталог литературы из `123.txt` в базу данных и переработать интерфейс роли «Группа»: заказ формируется из позиций каталога, единица измерения фиксирована как «шт», приоритет заказа не выбирается. Список литературы отображается в исходном порядке с типами, рядом с каждой позицией — поле количества и кнопка «Добавить». Выбранные позиции показываются в правом фрейме. Блоки «Создание заказа» и «Мои заказы» становятся компактнее и идут последовательно под «Сводкой роли».

## Фаза 1 — Расширение модели данных
**Задачи:**
- Обновить Prisma-схему: создать сущность литературы (тип + название + сортировка) и сущность позиций заказа с количеством.
- Обновить миграции/seed, чтобы новая структура не ломала текущие данные.
- Обновить типы API, чтобы заказ возвращал связанные позиции.
**Промпт:**
«Выполни Фазу 1: расширь Prisma-схему для каталога литературы и позиций заказа, подготовь миграцию. Никакого оверинжиниринга.»

## Фаза 2 — Импорт каталога
**Задачи:**
- Добавить скрипт/seed, который считывает `123.txt`, разбивает табуляцией на тип и название, загружает в таблицу литературы, сохраняя порядок.
- Обновить README (api) инструкцией по запуску импорта, если требуется.
**Промпт:**
«Выполни Фазу 2: реализуй загрузку каталога литературы из 123.txt в базу. Обнови инструкции, если нужно.»

## Фаза 3 — API для каталога и заказов
**Задачи:**
- Добавить эндпоинт `GET /api/literature` (возвращает упорядоченный список с типом и названием).
- Расширить `POST /api/orders`: принимать массив позиций { literatureId, quantity }, валидировать количество (целое ≥0).
- Убедиться, что `GET /api/orders` и `GET /api/orders/:id` возвращают позиции заказа.
- Обновить клиент `app/src/api.ts` под новые типы.
**Промпт:**
«Выполни Фазу 3: расширь API для каталога литературы и новых полей заказа. Обнови клиентские типы.»

## Фаза 4 — Интерфейс роли «Группа»
**Задачи:**
- Перестроить `GroupDashboard`: убрать поля «Единица измерения» и «Приоритет».
- Добавить таблицу литературы с вводом количества и кнопкой «Добавить»; данные брать из нового эндпоинта.
- Реализовать динамический фрейм выбранных позиций (справа), со списком и возможностью уменьшить количество/удалить.
- Обеспечить отправку заказа вместе с выбранными позициями, сброс состояния после успеха.
**Промпт:**
«Выполни Фазу 4: обнови интерфейс группы под каталог литературы, добавь динамический заказ и отправку позиций.»

## Фаза 5 — Компоновка и полировка
**Задачи:**
- Уменьшить высоту/ширину блоков «Создание заказа» и «Мои заказы», расположить их последовательно после «Сводки роли».
- Добавить подсказки/состояния (н-р, уведомления об успешном добавлении, пустых списках) без излишней сложности.
- Проверить адаптивность, чтобы таблица каталога и фрейм заказа корректно ужимались на средних экранах.
**Промпт:**
«Выполни Фазу 5: откорректируй компоновку блоков, добавь лёгкую полировку UI без оверинжиниринга.»

## Фаза 6 — Тестирование и документация
**Задачи:**
- Пройти сценарий: создать заказ с несколькими позициями, сменить роль, убедиться в отображении на стороне «Местности».
- Обновить README (`app`, `api`) инструкциями по работе с каталогом и новым UI.
- Кратко зафиксировать в CHANGELOG/комментарии (если ведём) ключевые изменения.
**Промпт:**
«Выполни Фазу 6: проверь сценарии, обнови документацию под новый процесс.»

---

*После выполнения всех фаз убедись, что задачи из MVP_PLAN_FIX.md закрыты и согласованы с пользователем.*
